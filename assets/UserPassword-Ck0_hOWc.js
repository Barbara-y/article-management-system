import{_ as S}from"./PageContainer-C9zC8I0W.js";import{r as _,u as U,a as k,o as F,c as x,b as t,d as e,f as m,b_ as C,E as R}from"./index-syqKWX7j.js";import{a as q,E as B}from"./el-col-D362NwZM.js";import{E as N,a as P}from"./el-form-item-O5a90zrv.js";import{E as $}from"./_plugin-vue_export-helper-1ri0UiEr.js";import{E as I}from"./el-input-Ds0CiSJo.js";import"./el-message-t4i-OOlM.js";const H={__name:"UserPassword",setup(T){const u=_(),r=_({old_pwd:"",new_pwd:"",re_pwd:""}),i=(d,o,l)=>{o===r.value.old_pwd?l(new Error("原密码和新密码不能一样!")):l()},w=(d,o,l)=>{o!==r.value.new_pwd?l(new Error("新密码和确认再次输入的新密码不一样!")):l()},n=U(),f=k(),c=async()=>{await u.value.validate(),await C(r.value),R.success("密码修改成功"),n.setToken(""),n.setUser({}),f.push("/login")},g=()=>{u.value.resetFields()},v={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:i,trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:w,trigger:"blur"}]};return(d,o)=>{const l=I,s=N,p=$,b=P,E=q,V=B,y=S;return F(),x(y,{title:"修改密码"},{default:t(()=>[e(V,null,{default:t(()=>[e(E,{span:12},{default:t(()=>[e(b,{model:r.value,rules:v,ref_key:"formRef",ref:u,"label-width":"100px",size:"large"},{default:t(()=>[e(s,{label:"原密码",prop:"old_pwd"},{default:t(()=>[e(l,{modelValue:r.value.old_pwd,"onUpdate:modelValue":o[0]||(o[0]=a=>r.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"新密码",prop:"new_pwd"},{default:t(()=>[e(l,{modelValue:r.value.new_pwd,"onUpdate:modelValue":o[1]||(o[1]=a=>r.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"确认新密码",prop:"re_pwd"},{default:t(()=>[e(l,{modelValue:r.value.re_pwd,"onUpdate:modelValue":o[2]||(o[2]=a=>r.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(p,{onClick:c,type:"primary"},{default:t(()=>[m("修改密码")]),_:1}),e(p,{onClick:g},{default:t(()=>[m("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{H as default};
